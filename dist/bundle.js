(()=>{"use strict";let t=[];let e={balance:0,totalExpenses:0,totalIncome:0};const n=document.getElementById("type"),o=document.getElementById("amount"),a=document.getElementById("details"),c=document.getElementById("transactionList"),l=document.getElementById("addButton"),s=document.getElementById("balance"),i=document.getElementById("income"),d=document.getElementById("expenses");function u(t){c.innerHTML="",t.forEach(((t,e)=>{const n=document.createElement("li");n.textContent=`Type: ${t.type} - Detail: ${t.detail} - Amount: ${t.amount}`,c.appendChild(n)}))}function r(t){return e.totalIncome+=t,e.totalIncome}function m(t){return e.totalExpenses+=t,e.totalExpenses}function p(t){s.textContent=`$${t.balance.toFixed(0)}`,i.textContent=`RP${t.totalIncome.toFixed(0)}`,d.textContent=`$${t.totalExpenses.toFixed(0)}`}fetch("https://api-week8-andra.up.railway.app/transactions").then((t=>t.json())).then((n=>{t.push(...n),u(t),function(t){t.forEach((t=>{"cash in"===t.type?r(t.amount):m(t.amount),e.balance=e.totalIncome-e.totalExpenses,p(e)}))}(t),console.log("Succeeded to fetch API ")})).catch((t=>{console.error(t)})),null==l||l.addEventListener("click",(c=>{c.preventDefault();const l=n.value,s=a.value,i=parseInt(o.value);""!==o.value&&""!==a.value?(function(n,o,a){var c,l,s,i;c=this,l=void 0,i=function*(){const c={type:n,detail:o,amount:a};try{const n=yield fetch("https://api-week8-andra.up.railway.app/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(n.ok){const o=yield n.json();console.log("New transaction added:",o),"cash in"===o.type?r(o.amount):m(o.amount),e.balance=e.totalIncome-e.totalExpenses,p(e),t.push(o),u(t)}else console.error("Failed to add transaction:",n.statusText)}catch(t){console.error("Error adding transaction:",t)}},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{a(i.next(t))}catch(t){e(t)}}function o(t){try{a(i.throw(t))}catch(t){e(t)}}function a(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,o)}a((i=i.apply(c,l||[])).next())}))}(l,s,i),o.value="",a.value=""):alert("Please fill in both details and amount.")}))})();